{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":[" "],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>\uacc4\ub7c9\uacbd\uc81c\ud559\uac15\uc758 \uc7a5\ubcc4 python \ucf54\ub4dc</p>"},{"location":"#_1","title":"\ubaa9\ub85d","text":"<ul> <li>\uc790\ub8cc \uc900\ube44</li> <li>\uc81c3\uc7a5</li> </ul>"},{"location":"00-intro/","title":"\uc900\ube44","text":""},{"location":"00-intro/#python","title":"Python \uc900\ube44","text":"<p>\ud3f4\ub354(\uc608\ub97c \ub4e4\uc5b4 <code>loepy</code>)\ub97c \ud558\ub098 \ub9cc\ub4e0\ub2e4. \uadf8 \uc548\uc5d0\uc11c \uc791\uc5c5\ud560 \uac83\uc774\ub2e4.</p> <p>UV\ub97c \uc124\uce58\ud558\uace0 <code>loepy</code> \ud3f4\ub354 \uc548\uc5d0\uc11c \ub2e4\uc74c \uba85\ub839\uc73c\ub85c uv \ud658\uacbd\uc744 \ub9cc\ub4e0\ub2e4.</p> Bash Session<pre><code>$ uv init\n$ uv add numpy pandas statsmodels scipy matplotlib\n</code></pre> <p><code>statsmodels</code>\ub294 \ud68c\uadc0\ubd84\uc11d, <code>numpy</code>\ub294 log\ub098 exp \ub4f1, <code>pandas</code>\ub294 CSV \ud30c\uc77c \ub4f1 \uc77d\uae30, <code>matplotlib</code>\uc740 \uadf8\ub9bc, <code>scipy</code>\ub294 t\ubd84\ud3ec \ub4f1\uc758 CDF\uc640 \uc784\uacc4\uac12 \ub4f1\uc5d0 \uc0ac\uc6a9\ub41c\ub2e4.</p> <p>UV\ub294 \uc0ac\uc6a9\ud558\uae30 \uac04\ud3b8\ud574\uc11c \uc774\uac78 \uc911\uc2ec\uc73c\ub85c \uc124\uba85\ud558\ub824\ub294 \uac83\ubfd0\uc774\ub2e4. UV\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 global\ud558\uac8c \uc124\uce58\ub3fc \uc788\ub294 python\uc744 \uc0ac\uc6a9\ud558\uac70\ub098(\uc774 \uacbd\uc6b0 <code>pip install ...</code> \uba85\ub839\uc73c\ub85c \ud328\ud0a4\uc9c0 \uc124\uce58) conda \ub4f1 \uac00\uc0c1\ud658\uacbd\uc744 \uc0ac\uc6a9\ud574\ub3c4 \uc88b\ub2e4.</p>"},{"location":"00-intro/#_2","title":"\ub370\uc774\ud130 \uc900\ube44","text":"<p>\ub370\uc774\ud130\ub97c CSV \ud615\ud0dc\ub85c \ub9cc\ub4e4\uc5b4 python\uc5d0\uc11c \uc0ac\uc6a9\ud558\uace0\uc790 \ud55c\ub2e4. \uc6b0\uc120 R\uc5d0\uc11c \ub2e4\uc74c\uc744 \uc2e4\ud589\ud558\uc5ec \ud544\uc694\ud55c \ud328\ud0a4\uc9c0\ub97c \uc124\uce58\ud55c\ub2e4.</p> R<pre><code>## R\uc5d0\uc11c \uc2e4\ud589\npkgs &lt;- c(\"loedata\", \"gamair\", \"Ecdat\", \"AER\", \"wooldridge\", \"sampleSelection\")\nfor (pkg in setdiff(pkgs, installed.packages())) install.packages(pkg)\n</code></pre> <p>\ub2e4\uc74c\uc73c\ub85c R\uc5d0\uc11c \ub370\uc774\ud130\uc14b\ub4e4\uc744 CSV \ud615\ud0dc\ub85c \ubcc0\ud658\ud558\uc5ec \uc800\uc7a5\ud560 \uac83\uc774\ub2e4. \ub2e4\uc74c R \ucf54\ub4dc\ub97c \ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ud55c \ud6c4 R \ucf58\uc194(R, \ud130\ubbf8\ub110, Rstudio \ub4f1)\uc5d0 \ubd99\uc5ec \ub123\uc5b4 \uc2e4\ud589\ud55c\ub2e4. \uadf8\ub7ec\uba74 R \ub370\uc774\ud130\uac00 CSV \ud615\uc2dd\uc73c\ub85c \ubcc0\ud658\ub418\uc5b4 \ud604 \ub514\ub809\ud1a0\ub9ac(R \ucf54\ub4dc\uac00 \uc2e4\ud589\ub418\uace0 \uc788\ub294 \ub514\ub809\ud1a0\ub9ac\ub85c\uc11c getwd()\ub85c\uc368 \uc54c \uc218 \uc788\uc74c)\uc758 csv \ud558\uc704 \ud3f4\ub354\uc5d0 \uc800\uc7a5\ub41c\ub2e4. \uc774\ub807\uac8c csv \ud3f4\ub354\uac00 \ub9cc\ub4e4\uc5b4\uc9c0\uba74 \uc774 csv \ud3f4\ub354\ub97c \uc791\uc5c5\ud558\uace0\uc790 \ud558\ub294 \ud3f4\ub354\uc5d0 \ubcf5\uc0ac\ud558\uba74 \ub41c\ub2e4. \ud544\uc790\uc758 \uacbd\uc6b0 \ud648 \ub514\ub809\ud1a0\ub9ac \ub0b4 doc/thebook/python \ud3f4\ub354 \ub0b4\uc5d0 csv \ud3f4\ub354\uac00 \uc788\uace0, doc/thebook/python \ud3f4\ub354\uc5d0\uc11c \ud30c\uc774\uc36c \ucf54\ub529\uc744 \ud558\uace0 \uc788\ub2e4.</p> R<pre><code>## R\uc5d0\uc11c \uc2e4\ud589\nWhat &lt;- list(\n    loedata = c('Death', 'Klips', 'Pubserv', 'Ekc', 'Galtonpar', 'Hcons',\n        'Klosa', 'Ksalary', 'Regko', 'Fastfood', 'Hies', 'Ivdata', 'Hmda'),\n    gamair = c('hubble'),\n    Ecdat = c('Cigar', 'Consumption', 'Crime', 'Housing', 'Wages1', 'Wages',\n        'Doctor', 'Schooling', 'Tobacco'),\n    AER = c('CigarettesB'),\n    wooldridge = c('twoyear', 'smoke', 'wage2'),\n    sampleSelection = c('Mroz87'))\n\ntopdir = 'csv'\nif (!dir.exists(topdir)) dir.create(topdir)\n\nfor (pkg in names(What)) {\n  cat(pkg, ':', sep='')\n  outdir &lt;- file.path(topdir, pkg)\n  if (!dir.exists(outdir)) dir.create(outdir)\n  for (dta in What[[pkg]]) {\n    cat(' ', dta, sep='')\n    outfile &lt;- file.path(outdir, paste0(dta, '.csv'))\n    eval(parse(text = sprintf('data(%s, package = \"%s\")', dta, pkg)))\n    z &lt;- get(dta)\n    if (dta == 'CigarettesB' &amp;&amp; pkg == 'AER') {\n      z$state &lt;- rownames(z)\n      z &lt;- z[c('state', setdiff(names(z), 'state'))]\n    }\n    write.csv(z, file = outfile, row.names = FALSE)\n  }\n  cat(\"\\n\")\n}\n</code></pre> <p>\uc704 \ucf54\ub4dc\uc758 \uc2e4\ud589\uc774 \ub05d\ub098\uba74 \ud604 \ub514\ub809\ud1a0\ub9ac\uc758 <code>csv</code> \ud3f4\ub354 \uc544\ub798\uc5d0 \ud328\ud0a4\uc9c0\uba85\uc5d0 \ud574\ub2f9\ud558\ub294 \ud3f4\ub354\ub4e4\uc774 \uc0dd\uae30\uace0 \uc774\ub4e4 \uac01 \ud3f4\ub354 \uc548\uc5d0 \ub370\uc774\ud130 CSV \ud30c\uc77c\uc774 \uc0dd\uc131\ub41c\ub2e4. <code>csv</code> \ud3f4\ub354\ub97c \uc5f4\uc5b4 \ubcf4\uba74 \ubb34\uc2a8 \ub9d0\uc778\uc9c0 \uc54c \uc218 \uc788\uc744 \uac83\uc774\ub2e4. \ub9c8\uc9c0\ub9c9\uc73c\ub85c, <code>csv</code> \ud3f4\ub354\ub97c \uc704\uc5d0\uc11c \uc0dd\uc131\ud55c <code>loepy</code> \ud3f4\ub354\ub85c \uc774\ub3d9\ud55c\ub2e4.</p>"},{"location":"00-intro/#_3","title":"\ub514\ub809\ud1a0\ub9ac \uad6c\uc870","text":"<p>\ucd5c\uc885\uc801\uc778 \ub514\ub809\ud1a0\ub9ac \uad6c\uc870\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> directory structure<pre><code>loepy\n\u251c\u2500\u2500 csv\n\u2502   \u251c\u2500\u2500 AER\n\u2502   \u2502   \u2514\u2500\u2500 CigarettesB.csv\n\u2502   \u251c\u2500\u2500 Ecdat\n\u2502   \u2502   \u251c\u2500\u2500 Cigar.csv\n\u2502   \u2502   \u251c\u2500\u2500 Consumption.csv\n\u2502   \u2502   \u251c\u2500\u2500 Crime.csv\n\u2502   \u2502   \u251c\u2500\u2500 Doctor.csv\n\u2502   \u2502   \u251c\u2500\u2500 Housing.csv\n\u2502   \u2502   \u251c\u2500\u2500 Schooling.csv\n\u2502   \u2502   \u251c\u2500\u2500 Tobacco.csv\n\u2502   \u2502   \u251c\u2500\u2500 Wages.csv\n\u2502   \u2502   \u2514\u2500\u2500 Wages1.csv\n\u2502   \u251c\u2500\u2500 gamair\n\u2502   \u2502   \u2514\u2500\u2500 hubble.csv\n\u2502   \u251c\u2500\u2500 loedata\n\u2502   \u2502   \u251c\u2500\u2500 Death.csv\n\u2502   \u2502   \u251c\u2500\u2500 Ekc.csv\n\u2502   \u2502   \u251c\u2500\u2500 Fastfood.csv\n\u2502   \u2502   \u251c\u2500\u2500 Galtonpar.csv\n\u2502   \u2502   \u251c\u2500\u2500 Hcons.csv\n\u2502   \u2502   \u251c\u2500\u2500 Hies.csv\n\u2502   \u2502   \u251c\u2500\u2500 Hmda.csv\n\u2502   \u2502   \u251c\u2500\u2500 Ivdata.csv\n\u2502   \u2502   \u251c\u2500\u2500 Klips.csv\n\u2502   \u2502   \u251c\u2500\u2500 Klosa.csv\n\u2502   \u2502   \u251c\u2500\u2500 Ksalary.csv\n\u2502   \u2502   \u251c\u2500\u2500 Pubserv.csv\n\u2502   \u2502   \u2514\u2500\u2500 Regko.csv\n\u2502   \u251c\u2500\u2500 sampleSelection\n\u2502   \u2502   \u2514\u2500\u2500 Mroz87.csv\n\u2502   \u2514\u2500\u2500 wooldridge\n\u2502       \u251c\u2500\u2500 smoke.csv\n\u2502       \u251c\u2500\u2500 twoyear.csv\n\u2502       \u2514\u2500\u2500 wage2.csv\n\u251c\u2500\u2500 main.py\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 uv.lock\n</code></pre>"},{"location":"03/","title":"3\uc7a5 \ub2e8\uc21c\ud68c\uadc0 \ubaa8\ud615\uc758 \ucd94\uc815","text":"<p>3\uc7a5 \ub2e8\uc21c\ud68c\uadc0 \ubaa8\ud615\uc758 \ucd94\uc815\uacfc \uad00\ub828\ub41c \uc2e4\uc2b5\uc744 \ud55c\ub2e4. \ub370\uc774\ud130\uc640 \ud544\uc694\ud55c \ud30c\uc774\uc36c \ud328\ud0a4\uc9c0\ub294 \uc5ec\uae30 \ucc38\uc870.</p> <p>\uc6b0\uc120 \ub2e4\uc74c \uba85\ub839\uc73c\ub85c python interpreter\ub97c \uc2e4\ud589\ud55c\ub2e4.</p> Bash Session<pre><code>$ uv run python\n</code></pre> <p>\ub2e4\uc74c \uba85\ub839\ub4e4\uc744 \uc2e4\ud589\ud55c\ub2e4(\ubcf5\uc0ac \u2192 \ubd99\uc5ec\ub123\uae30). \ucc98\uc74c \uc2e4\ud589\ud560 \ub54c\uc5d0\ub294 \uc2dc\uac04\uc774 \uc880 \uac78\ub9b4 \uc218 \uc788\uc73c\ub098 \uadf8 \ub2e4\uc74c\ubd80\ud130\ub294 \ube68\ub9ac \ub420 \uac83\uc774\ub2e4.</p> Python<pre><code>import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n</code></pre>"},{"location":"03/#31","title":"3.1 \uc790\ub8cc","text":""},{"location":"03/#_1","title":"\uc18c\ub4dd\uacfc \ud658\uacbd\uc624\uc5fc","text":"Python<pre><code>Ekc = pd.read_csv('csv/loedata/Ekc.csv')\nfig = plt.figure(figsize=(8,3.5))\nplt.subplot(1,2,1)\nplt.scatter(Ekc.gdppcppp, Ekc.co2pc, facecolors='w', edgecolors='k')\n#plt.plot(Ekc.gdppcppp, Ekc.co2pc, 'o', mfc='none')\nplt.title(\"In original scale\")\nplt.subplot(1,2,2)\nplt.scatter(Ekc.gdppcppp, Ekc.co2pc, facecolors='w', edgecolors='k')\nplt.xscale('log')\nplt.yscale('log')\nplt.title('In log scale')\nplt.show()\n</code></pre>"},{"location":"03/#_2","title":"\uacf5\ubb34\uc6d0 \uc218 \ube44\uc728\uacfc \uc7ac\uc815\uc790\ub9bd\ub3c4","text":"Python<pre><code>Pubserv = pd.read_csv('csv/loedata/Pubserv.csv')\nPubserv1 = Pubserv[Pubserv['servpc'] &lt; 28].copy()\nfig = plt.figure(figsize=(5,3))\nplt.scatter(Pubserv1.servpc, Pubserv1.finind, color='w', edgecolors='k')\nplt.show()\n</code></pre>"},{"location":"03/#_3","title":"\uad50\uc721\uc218\uc900\uacfc \uc784\uae08","text":"Python<pre><code>Klips = pd.read_csv('csv/loedata/Klips.csv')\nKlips2 = Klips[(Klips['regular']==1) &amp; (Klips['married']==1)].copy()\nprint(Klips2.shape)\nfig = plt.figure(figsize=(5,3))\nplt.scatter(Klips2.educ, Klips2.labinc, color='w', edgecolors='k')\n#plt.plot(Klips2.educ, Klips2.labinc, 'o', mfc='w')\nplt.yscale('log')\nplt.show()\n</code></pre> Python<pre><code>Klips2['lnlabinc'] = np.log(Klips2['labinc'])\nave = Klips2[['educ','lnlabinc']].groupby(['educ']).mean(['lnlabinc']).reset_index()\nprint(ave)\n</code></pre> Result<pre><code>    educ  lnlabinc\n0      9  3.145510\n1     10  3.239290\n2     11  2.837503\n3     12  3.262296\n4     13  3.223670\n5     14  3.342744\n6     15  3.223641\n7     16  3.476449\n8     17  3.312591\n9     18  3.693358\n10    19  3.696848\n</code></pre> Python<pre><code>fig = plt.figure(figsize=(5,3))\nplt.plot(Klips2.educ, Klips2.lnlabinc, 'o', mfc='w')\nplt.plot(ave['educ'], ave['lnlabinc'], '^', color='black', ms=10)\nplt.show()\n</code></pre>"},{"location":"03/#34","title":"3.4 \uc9e7\uc740 \uc608\uc81c\ub4e4","text":"<p>\uc774\ud558\uc5d0\uc11c \uc0b0\ud3ec\ub3c4\uc5d0 \uc9c1\uc120\uc744 \ub367\uadf8\ub9b4 \uac83\uc778\ub370, \ud544\uc790\uac00 \uc2e4\ud5d8\ud574 \ubcf8 \ubc14\ub85c\ub294 \uc9c1\uc120\uc744 \uadf8\ub9ac\uba74 \uc0b0\ud3ec\ub3c4\uc758 \ucd95\uc774 \ubc14\ub010\ub2e4. \uadf8\ub7ec\ubbc0\ub85c \uc0b0\ud3ec\ub3c4\ub97c \uadf8\ub9b0 \ub2e4\uc74c\uc5d0 \ucd95\uc744 \uace0\uc815\uc2dc\ud0a4\ub294 \ud568\uc218\ub97c \ub9cc\ub4e4\uc5b4\uc11c \ud638\ucd9c\ud558\uace0\uc790 \ud55c\ub2e4. \ub2e4\uc74c\uacfc \uac19\uc774 <code>fix_lims</code> \ud568\uc218\ub97c \uc815\uc758\ud558\uace0 \uc55e\uc5d0\uc11c import\ud55c <code>plt</code>\uc758 \ud074\ub798\uc2a4 \ud568\uc218\ub85c \uc774\ub97c \ucd94\uac00\ud55c\ub2e4.</p> Python<pre><code>## https://stackoverflow.com/questions/972/adding-a-method-to-an-existing-object-instance\n# We need this to fixate the limits of plots\nimport matplotlib.pyplot as plt\ndef fix_lims(self):\n    self.xlim(self.gca().get_xlim())\n    self.ylim(self.gca().get_ylim())\n\n# Now patch plt\nplt.fix_lims = fix_lims.__get__(plt)\n\n# \uc704 method\ub97c \ub9cc\ub4e4\uace0 \uc2f6\uc9c0 \uc54a\uc73c\uba74 plt.fix_lims()\ub97c \ubaa8\ub450 \ub2e4\uc74c\uc73c\ub85c \uad50\uccb4\n# plt.xlim(plt.gca().get_xlim())\n# plt.ylim(plt.gca().get_ylim())\n</code></pre> <p>\uc774\uc81c <code>plt.fix_lims()</code>\ub97c \ud638\ucd9c\ud558\uba74 \uadf8\ub9bc\uc758 \ucd95\uc774 \uace0\uc815\ub41c\ub2e4.</p>"},{"location":"03/#ols-lad","title":"\uc7ac\uc815\uc790\ub9bd\ub3c4 \ud68c\uadc0: OLS\uc640 LAD","text":"Python<pre><code>from statsmodels.api import OLS, QuantReg\nfm = 'finind~servpc'\nols = OLS.from_formula(fm, data = Pubserv1).fit()\nlad = QuantReg.from_formula(fm, data = Pubserv1).fit(q=0.5)\n</code></pre> Python<pre><code>fig = plt.figure(figsize=(5,3))\nplt.plot(Pubserv1.servpc, Pubserv1.finind, 'o', mfc='w')\nplt.fix_lims()\nplt.axline((0, ols.params['Intercept']), slope=ols.params['servpc'])\nplt.axline((0, lad.params['Intercept']), slope=lad.params['servpc'], linestyle=':')\nplt.show()\n</code></pre>"},{"location":"03/#_4","title":"\uc7ac\uc815\uc790\ub9bd\ub3c4 \ud68c\uadc0","text":"Python<pre><code>import pandas as pd\nimport numpy as np\nimport statsmodels.formula.api as smf\nPubserv = pd.read_csv('csv/loedata/Pubserv.csv')\nPubserv1 = Pubserv[Pubserv['servpc'] &lt; 28].copy()\nols = smf.ols('np.log(finind)~np.log(servpc)', Pubserv1).fit()\nols.params\n</code></pre> Result<pre><code>Intercept         4.767454\nnp.log(servpc)   -0.821201\ndtype: float64\n</code></pre>"},{"location":"03/#_5","title":"\uc218\ub3d9\uc73c\ub85c \uacc4\uc0b0 \uacb0\uacfc \ud655\uc778","text":"<p>\uc704 \uacb0\uacfc\ub97c \uc218\ub3d9\uc73c\ub85c \uacc4\uc0b0\ud558\uace0\uc790 \ud55c\ub2e4. Python\uc5d0\uc11c \ub85c\uadf8\ub97c \ucde8\ud558\uac70\ub098 \ud45c\ubcf8\ud3c9\uade0, \ud569\uacc4 \ub4f1\uc740 <code>numpy</code> \ud328\ud0a4\uc9c0\uc5d0 \uad6c\ud604\ub418\uc5b4 \uc788\ub2e4. \uc55e\uc5d0\uc11c <code>numpy</code>\ub97c <code>np</code>\ub85c import\ud588\uc73c\ubbc0\ub85c <code>np.log</code>, <code>np.mean</code>, <code>np.sum</code> \ub4f1\uc774\ub77c\uace0 \ud574\uc57c \ud55c\ub2e4.</p> Python<pre><code>x = np.log(Pubserv1.servpc)\ny = np.log(Pubserv1.finind)\nxbar = np.mean(x)\nxd = x-xbar\nb1 = np.sum(xd*y)/np.sum(xd**2)\nb0 = np.mean(y)-b1*xbar\nb0,b1\n</code></pre> Result<pre><code>(4.767453582972257, -0.8212005150740734)\n</code></pre>"},{"location":"03/#_6","title":"\ub370\uc774\ud130\uc640 \ud68c\uadc0 \uc9c1\uc120 \uadf8\ub9bc\uc73c\ub85c \ud45c\uc2dc","text":"<p>\uadf8\ub9bc\uc744 \uadf8\ub9b4 \ub54c \ucd95\uc744 \uace0\uc815\ud558\uae30 \uc704\ud574 \uc5ec\uae30\uc5d0\uc11c <code>fix_lims()</code> \uba54\uc3d8\ub4dc\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.</p> Python<pre><code>import matplotlib.pyplot as plt\nfig = plt.figure(figsize=(5,3))\nplt.scatter(x,y)\nplt.fix_lims()\nplt.axline((0,b0), slope=b1, color='k', lw=0.5)\nplt.show()\n</code></pre> <p></p> <p>\uc9c1\uc120 \uc0c9\uae54\uc744 \uac80\uc815\uc0c9\uc73c\ub85c \ud588\ub294\ub370 \ubcc4\ub2e4\ub978 \uc774\uc720\uac00 \uc788\uc5b4\uc11c\ub294 \uc544\ub2c8\uace0, \uc0c9\uae54 \uc904 \ub54c \uc5b4\ub5bb\uac8c \ud558\ub294\uc9c0 \uc54c\uc544\ubcf4\ub824\uace0 \ud55c\ubc88 \ud574 \ubcf8 \uac83\uc774\ub2e4.</p>"},{"location":"03/#_7","title":"\uad50\uc721\uc218\uc900\uacfc \uc5f0\uac04 \uadfc\ub85c\uc18c\ub4dd","text":"Python<pre><code>import pandas as pd\nimport numpy as np\nimport statsmodels.formula.api as smf\nKlips = pd.read_csv('csv/loedata/Klips.csv')\nKlips2 = Klips[(Klips['regular']==1) &amp; (Klips['married']==1)].copy()\nols = smf.ols('np.log(labinc)~educ', data = Klips2).fit()\nols.params\n</code></pre> Result<pre><code>Intercept    2.527273\neduc         0.059577\ndtype: float64\n</code></pre> <p>\uadf8\ub9bc\uc744 \uadf8\ub9b4 \ub54c \ucd95\uc744 \uace0\uc815\ud558\uae30 \uc704\ud574 \uc5ec\uae30\uc5d0\uc11c <code>fix_lims()</code> \uba54\uc3d8\ub4dc\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.</p> Python<pre><code>import matplotlib.pyplot as plt\nfig = plt.figure(figsize=(5,3))\nplt.scatter(Klips2.educ, np.log(Klips2.labinc))\nplt.fix_lims() # see above\nb0,b1 = ols.params\nplt.axline((0,b0), slope = b1)\nplt.show()\n</code></pre> <p></p>"},{"location":"03/#_8","title":"\uace0\ub839\uc778\uad6c\ube44\uc728\uacfc \ud761\uc5f0\uc728","text":"Python<pre><code>import pandas as pd\nimport statsmodels.formula.api as smf\nDeath = pd.read_csv('csv/loedata/Death.csv')\nDeath10 = Death[Death.year==2010].copy()\nols = smf.ols('smoke~aged', data=Death10).fit()\nols.params\n</code></pre> Result<pre><code>Intercept    29.077420\naged         -0.228558\ndtype: float64\n</code></pre> <p>\uadf8\ub9bc\uc744 \uadf8\ub9b4 \ub54c \ucd95\uc744 \uace0\uc815\ud558\uae30 \uc704\ud574 \uc5ec\uae30\uc5d0\uc11c <code>fix_lims()</code> \uba54\uc3d8\ub4dc\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.</p> Python<pre><code>import matplotlib.pyplot as plt\nfig = plt.figure(figsize=(5,3))\nplt.scatter(Death10.aged, Death10.smoke)\nplt.fix_lims()\nb0,b1 = ols.params\nplt.axline((0,b0), slope=b1)\nplt.show()\n</code></pre> <p></p>"},{"location":"03/#_9","title":"\uc18c\ube44\ud568\uc218","text":"Python<pre><code>import pandas as pd\nimport statsmodels.formula.api as smf\nConsumption = pd.read_csv('csv/Ecdat/Consumption.csv')\nols = smf.ols('ce~yd', data = Consumption).fit()\nols.params\n</code></pre> Result<pre><code>Intercept    6000.256052\nyd              0.861788\ndtype: float64\n</code></pre> <p>\uadf8\ub9bc\uc744 \uadf8\ub9b4 \ub54c \ucd95\uc744 \uace0\uc815\ud558\uae30 \uc704\ud574 \uc5ec\uae30\uc5d0\uc11c <code>fix_lims()</code> \uba54\uc3d8\ub4dc\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.</p> Python<pre><code>import matplotlib.pyplot as plt\nfig = plt.figure(figsize=(5,3))\nplt.scatter(Consumption.yd, Consumption.ce)\nplt.fix_lims()\nb0,b1 = ols.params\nplt.axline((0,b0), slope = b1, color='k', lw=0.5)\nplt.show()\n</code></pre> <p></p>"},{"location":"03/#galton","title":"\uc720\uc804\ud559\uacfc Galton\uc758 \u201c\ud68c\uadc0\u201d","text":"Python<pre><code>import pandas as pd\nimport statsmodels.formula.api as smf\nGaltonpar = pd.read_csv('csv/loedata/Galtonpar.csv')\nols = smf.ols('avgsonht~midparht', data = Galtonpar).fit()\nols.params\n</code></pre> Result<pre><code>Intercept    21.752799\nmidparht      0.687150\ndtype: float64\n</code></pre> <p>\uadf8\ub9bc\uc744 \uadf8\ub9b4 \ub54c \ucd95\uc744 \uace0\uc815\ud558\uae30 \uc704\ud574 \uc5ec\uae30\uc5d0\uc11c <code>fix_lims()</code> \uba54\uc3d8\ub4dc\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.</p> Python<pre><code>import matplotlib.pyplot as plt\nGaltonpar.plot.scatter(x = 'midparht', y = 'avgsonht', figsize=(5,3))\nplt.fix_lims()\nb0,b1 = ols.params\nplt.axline((0,0), slope = 1, linestyle=':')\nplt.axline((0,b0), slope = b1)\nplt.show()\n</code></pre> <p></p> <p>\uc704 \uadf8\ub9bc\uc5d0\uc11c \uc810\uc120\uc740 45\ub3c4\uc120\uc774\ub2e4.</p>"},{"location":"03/#_10","title":"\uc6b0\uc8fc\uc758 \ub098\uc774","text":"Python<pre><code>import pandas as pd\nhubble = pd.read_csv('csv/gamair/hubble.csv')\nhubble.head(5)\n</code></pre> Result<pre><code>     Galaxy     y      x\n0   NGC0300   133   2.00\n1   NGC0925   664   9.16\n2  NGC1326A  1794  16.14\n3   NGC1365  1594  17.95\n4   NGC1425  1473  21.88\n</code></pre> Python<pre><code>import statsmodels.formula.api as smf\nols = smf.ols('y~x-1', data = hubble).fit()\nols.params\n</code></pre> Result<pre><code>x    76.581172\ndtype: float64\n</code></pre> Python<pre><code>import matplotlib.pyplot as plt\nhubble.plot.scatter(x='x', y='y', figsize=(5,3))\nplt.axline((0,0), slope=ols.params['x'])\nplt.show()\n</code></pre>"},{"location":"03/#_11","title":"\ub2f4\ubc30 \uac00\uaca9\uacfc \ud310\ub9e4\ub7c9","text":"Python<pre><code>import numpy as np\nimport pandas as pd\nimport statsmodels.formula.api as smf\nCigar = pd.read_csv('csv/Ecdat/Cigar.csv')\nCigar90 = Cigar[Cigar.year==90].copy()\nols = smf.ols('np.log(sales)~np.log(price)', data=Cigar90).fit()\nols.params\n</code></pre> Result<pre><code>Intercept        9.081182\nnp.log(price)   -0.899229\ndtype: float64\n</code></pre>"},{"location":"03/#36","title":"3.6 \ub9de\ucd98\uac12\uacfc \uc794\ucc28","text":""},{"location":"03/#_12","title":"\uc7ac\uc815\uc790\ub9bd\ub3c4 \ud68c\uadc0","text":"<p>\uadf8\ub9bc\uc744 \uadf8\ub9b4 \ub54c \ucd95\uc744 \uace0\uc815\ud558\uae30 \uc704\ud574 \uc5ec\uae30\uc5d0\uc11c <code>fix_lims()</code> \uba54\uc3d8\ub4dc\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.</p> Python<pre><code>import pandas as pd\nimport numpy as np\nimport statsmodels.formula.api as smf\nPubserv = pd.read_csv('csv/loedata/Pubserv.csv')\nPubserv1 = Pubserv[Pubserv['servpc'] &lt; 28].copy()\nols = smf.ols('np.log(finind)~np.log(servpc)', data = Pubserv1).fit()\nb0,b1 = ols.params\nimport matplotlib.pyplot as plt\nplt.figure(figsize=(5,3))\nplt.scatter(np.log(Pubserv1.servpc), np.log(Pubserv1.finind), zorder=1)\nplt.fix_lims()\nplt.axline((0,b0), slope=b1, linewidth=1, zorder=2)\nplt.scatter(np.log(Pubserv1.servpc), ols.fittedvalues, marker = '^', zorder=3)\nplt.show()\n</code></pre> <p></p>"},{"location":"03/#_13","title":"\uc794\ucc28\ud569, \uc124\uba85\ubcc0\uc218\uc640 \uc794\ucc28\uc758 \uacf1\uc758 \ud569, \ub9de\ucd98\uac12\uacfc \uc794\ucc28\uc758 \uacf1\uc758 \ud569","text":"Python<pre><code>print(f\"Sum of residuals = {np.sum(ols.resid)}\")\nprint(f\"Sum of x*uhat    = {np.sum(ols.resid*np.log(Pubserv1.servpc))}\")\nprint(f\"Sum of yhat*uhat = {np.sum(ols.fittedvalues*ols.resid)}\")\n</code></pre> Result<pre><code>Sum of residuals = 9.547918011776346e-14\nSum of x*uhat    = 2.5029978090174154e-13\nSum of yhat*uhat = 2.485095462745335e-13\n</code></pre>"},{"location":"03/#39-r","title":"3.9 R\uc81c\uacf1","text":""},{"location":"03/#ols","title":"OLS \ud68c\uadc0 \uacb0\uacfc \uc694\uc57d","text":"Python<pre><code>print(ols.summary(slim=True))\n</code></pre> Result<pre><code>                            OLS Regression Results                            \n==============================================================================\nDep. Variable:         np.log(finind)   R-squared:                       0.553\nModel:                            OLS   Adj. R-squared:                  0.548\nNo. Observations:                  84   F-statistic:                     101.5\nCovariance Type:            nonrobust   Prob (F-statistic):           5.27e-16\n==================================================================================\n                     coef    std err          t      P&gt;|t|      [0.025      0.975]\n----------------------------------------------------------------------------------\nIntercept          4.7675      0.202     23.559      0.000       4.365       5.170\nnp.log(servpc)    -0.8212      0.081    -10.076      0.000      -0.983      -0.659\n==================================================================================\n\nNotes:\n[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n</code></pre>"},{"location":"03/#ssesst-r-squared","title":"SSE/SST = R-squared","text":"<p>\uc544\ub798 \ub450 \uac12\uc740 \ub3d9\uc77c\ud558\ub2e4.</p> Python<pre><code>print((ols.ess/ols.centered_tss, ols.rsquared))\n</code></pre> Result<pre><code>(0.5532173833344799, 0.55321738333448)\n</code></pre>"},{"location":"03/#311","title":"3.11 \uce21\uc815\ub2e8\uc704\uc758 \ubcc0\ud658","text":""},{"location":"03/#31_1","title":"\uc608\uc81c 3.1 \ub2e8\uc704 \ubcc0\ud658\uc758 \uc720\uc6a9\uc131","text":"Python<pre><code>Ekc = pd.read_csv('csv/loedata/Ekc.csv')\nsmf.ols('co2pc~gdppcppp', data = Ekc).fit().params\n</code></pre> Result<pre><code>Intercept   -0.034195\ngdppcppp     0.000339\ndtype: float64\n</code></pre> <p>\uc124\uba85\ubcc0\uc218\ub97c 1000\uc73c\ub85c \ub098\ub208 \ud6c4 \ud68c\uadc0\ud558\uba74, \uc6d0\ub798 \uacc4\uc218\ucd94\uc815\uce58\uc5d0 1000\uc744 \uacf1\ud55c \uac12\uc774 \uc0c8\ub85c\uc6b4 \ucd94\uc815\uce58\uac00 \ub41c\ub2e4.</p> Python<pre><code>smf.ols('co2pc~I(gdppcppp/1000)', data = Ekc).fit().params\n</code></pre> Result<pre><code>Intercept            -0.034195\nI(gdppcppp / 1000)    0.339048\ndtype: float64\n</code></pre>"},{"location":"03/#_14","title":"\ub85c\uadf8\uc640 \uce21\uc815\ub2e8\uc704 \ubcc0\ud658","text":"Python<pre><code>smf.ols('np.log(co2pc)~np.log(gdppcppp)', data = Ekc).fit().params\n</code></pre> Result<pre><code>Intercept          -10.283620\nnp.log(gdppcppp)     1.224789\ndtype: float64\n</code></pre> <p>\uc124\uba85\ubcc0\uc218\uac00 \ub85c\uadf8 \ud615\ud0dc\uc778 \uacbd\uc6b0 \uc124\uba85\ubcc0\uc218\ub97c 1000\uc73c\ub85c \ub098\ub204\uc5b4\ub3c4 \uc808\ud3b8 \ucd94\uc815\uce58\ub9cc \uc601\ud5a5\uc744 \ubc1b\ub294\ub2e4.</p> Python<pre><code>smf.ols('np.log(co2pc)~np.log(gdppcppp/1000)', data = Ekc).fit().params\n</code></pre> Result<pre><code>Intercept                 -1.823079\nnp.log(gdppcppp / 1000)    1.224789\ndtype: float64\n</code></pre>"}]}