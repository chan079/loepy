# 9장 다중회귀 추정량의 성질

## 예제 9.2 학력, 경력, 임금


```python
import pandas as pd
import statsmodels.formula.api as smf

Wages = pd.read_csv('csv/Ecdat/Wages.csv')
len(Wages)
```




    4165




```python
# Any better way?
idx = [x%7==1 for x in range(len(Wages))] # Watch out! Python indices begin with 0
Wages77 = Wages[idx].copy()
Wages77.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>exp</th>
      <th>wks</th>
      <th>bluecol</th>
      <th>ind</th>
      <th>south</th>
      <th>smsa</th>
      <th>married</th>
      <th>sex</th>
      <th>union</th>
      <th>ed</th>
      <th>black</th>
      <th>lwage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>4</td>
      <td>43</td>
      <td>no</td>
      <td>0</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>male</td>
      <td>no</td>
      <td>9</td>
      <td>no</td>
      <td>5.72031</td>
    </tr>
    <tr>
      <th>8</th>
      <td>31</td>
      <td>27</td>
      <td>yes</td>
      <td>0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
      <td>male</td>
      <td>no</td>
      <td>11</td>
      <td>no</td>
      <td>6.21461</td>
    </tr>
    <tr>
      <th>15</th>
      <td>7</td>
      <td>51</td>
      <td>yes</td>
      <td>1</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
      <td>male</td>
      <td>yes</td>
      <td>12</td>
      <td>no</td>
      <td>6.43615</td>
    </tr>
    <tr>
      <th>22</th>
      <td>32</td>
      <td>46</td>
      <td>yes</td>
      <td>0</td>
      <td>no</td>
      <td>yes</td>
      <td>no</td>
      <td>female</td>
      <td>no</td>
      <td>10</td>
      <td>yes</td>
      <td>6.23832</td>
    </tr>
    <tr>
      <th>29</th>
      <td>11</td>
      <td>46</td>
      <td>yes</td>
      <td>0</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
      <td>male</td>
      <td>yes</td>
      <td>16</td>
      <td>no</td>
      <td>6.62007</td>
    </tr>
  </tbody>
</table>
</div>




```python
ols = smf.ols('lwage~ed+exp', data=Wages77).fit()
ols.params
```




    Intercept    5.476063
    ed           0.062957
    exp          0.010107
    dtype: float64




```python
smf.ols('lwage~ed', data=Wages77).fit().params
```




    Intercept    5.767925
    ed           0.054283
    dtype: float64




```python
smf.ols('exp~ed', data=Wages77).fit().params
```




    Intercept    28.878598
    ed           -0.858271
    dtype: float64



## 예제 9.3 주택가격


```python
import numpy as np
Housing = pd.read_csv('csv/Ecdat/Housing.csv')
regA = smf.ols('np.log(price)~np.log(lotsize)+bedrooms', data=Housing).fit()
print("Regression A:")
regA.params
```

    Regression A:
    Intercept          6.380361
    np.log(lotsize)    0.501505
    bedrooms           0.145872
    dtype: float64




```python
regB = smf.ols('np.log(price)~bedrooms', data=Housing).fit()
print("Regression B:")
print(regB.params)
```

    Regression B:
    Intercept    10.505674
    bedrooms      0.186593
    dtype: float64



```python
regC = smf.ols('np.log(lotsize)~bedrooms', data=Housing).fit()
print("Regression C:")
print(regC.params)
```

    Regression C:
    Intercept    8.225860
    bedrooms     0.081199
    dtype: float64


## 예제 9.4 계수들의 선형결합의 신뢰구간


```python
import pandas as pd
import numpy as np

Housing = pd.read_csv('csv/Ecdat/Housing.csv')
ols = smf.ols('np.log(price)~np.log(lotsize/5000)+I(bedrooms-3)', data=Housing).fit()
ols.summary()
```




<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>      <td>np.log(price)</td>  <th>  R-squared:         </th> <td>   0.418</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.416</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   195.1</td>
</tr>
<tr>
  <th>Date:</th>             <td>Sun, 23 Jun 2024</td> <th>  Prob (F-statistic):</th> <td>1.43e-64</td>
</tr>
<tr>
  <th>Time:</th>                 <td>23:46:16</td>     <th>  Log-Likelihood:    </th> <td> -86.480</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>   546</td>      <th>  AIC:               </th> <td>   179.0</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>   543</td>      <th>  BIC:               </th> <td>   191.9</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     2</td>      <th>                     </th>     <td> </td>   
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   
</tr>
</table>
<table class="simpletable">
<tr>
             <td></td>               <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th>              <td>   11.0894</td> <td>    0.012</td> <td>  903.860</td> <td> 0.000</td> <td>   11.065</td> <td>   11.113</td>
</tr>
<tr>
  <th>np.log(lotsize / 5000)</th> <td>    0.5015</td> <td>    0.031</td> <td>   16.201</td> <td> 0.000</td> <td>    0.441</td> <td>    0.562</td>
</tr>
<tr>
  <th>I(bedrooms - 3)</th>        <td>    0.1459</td> <td>    0.017</td> <td>    8.733</td> <td> 0.000</td> <td>    0.113</td> <td>    0.179</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td> 2.883</td> <th>  Durbin-Watson:     </th> <td>   1.209</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.237</td> <th>  Jarque-Bera (JB):  </th> <td>   2.794</td>
</tr>
<tr>
  <th>Skew:</th>          <td>-0.175</td> <th>  Prob(JB):          </th> <td>   0.247</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 3.022</td> <th>  Cond. No.          </th> <td>    2.57</td>
</tr>
</table>
<div class="reg-notes">
Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</div>



```python
ols.conf_int(.05)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Intercept</th>
      <td>11.065294</td>
      <td>11.113495</td>
    </tr>
    <tr>
      <th>np.log(lotsize / 5000)</th>
      <td>0.440701</td>
      <td>0.562310</td>
    </tr>
    <tr>
      <th>I(bedrooms - 3)</th>
      <td>0.113059</td>
      <td>0.178684</td>
    </tr>
  </tbody>
</table>
</div>


